{% extends "base.html" %}

{% block content %}
<div class="case-file">
    <h2>NEW INTELLIGENCE REPORT</h2>

    <form method="POST" enctype="multipart/form-data">
        <div class="form-group">
            <label>Case Title</label>
            <input type="text" name="title" class="form-control" required>
        </div>

        <div class="form-group">
            <label>Analyst</label>
            <input type="text" name="author" class="form-control" value="NorthByte Analyst" required>
        </div>

        <div class="form-group">
            <label>Intelligence Data</label>
            <!-- content TEXT değil, TEXT zaten sınırsızdır PostgreSQL’de -->
            <textarea name="content" class="form-control" rows="12" required></textarea>
        </div>

        <div class="form-group">
            <label>Attachments</label>
            <input type="file" name="files" multiple>
        </div>

        <button type="submit" class="btn">Publish</button>
    </form>
</div>

<hr>

<div class="case-file">
    <h2>DATABASE RECORDS</h2>

    {% for post in posts %}
    <div style="margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px;">
        <strong>{{ post.title }}</strong><br>
        <small>{{ post.date.strftime('%d.%m.%Y') }} | {{ post.author }}</small>

        <form method="POST" action="{{ url_for('delete_post', post_id=post.id) }}" style="margin-top: 5px;">
            <button type="submit" class="btn btn-danger">Delete</button>
        </form>
    </div>
    {% else %}
        <p>No records.</p>
    {% endfor %}
</div>
{% endblock %}
